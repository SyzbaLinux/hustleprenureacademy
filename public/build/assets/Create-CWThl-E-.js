import{d as U,p as E,u as N,c as S,w as p,a as t,b as k,e as s,l as v,f as A,g as d,h as b,i as m,j as u,o,F as c,r as w,t as l,q as y,n as g,v as x}from"./app-DmVVAfp2.js";import{A as T}from"./AdminLayout-Duw2_jsE.js";import"./NavLink-CjtENRI9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"max-w-4xl mx-auto space-y-6"},F={class:"flex items-center gap-4"},M=["value"],P={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},j={class:"grid grid-cols-2 gap-4"},D={key:0},L=["required"],$=["value"],z={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},G={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},I=["required"],J={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},O=["required"],H={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},K={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},Q={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},R={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},W={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-slate-700"},X=["disabled"],Y={key:0},Z={key:1},ae=U({__name:"Create",props:{events:{},users:{}},setup(f){const h=f,n=E("existing_user"),r=N({event_id:"",user_id:"",phone_number:"",full_name:"",email:"",status:"confirmed",notes:""}),_=()=>{},C=()=>{if(r.user_id){const i=h.users.find(e=>e.id===parseInt(r.user_id));i!=null&&i.phone_number&&(r.phone_number=i.phone_number)}},V=()=>{n.value==="guest"?r.transform(i=>({...i,user_id:null})).post(route("admin.enrollments.store")):r.transform(i=>{const{full_name:e,email:a,...q}=i;return q}).post(route("admin.enrollments.store"))};return(i,e)=>(o(),S(T,null,{default:p(()=>[t("div",B,[t("div",F,[k(s(v),{href:i.route("admin.enrollments.index"),class:"p-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors"},{default:p(()=>[...e[9]||(e[9]=[t("i",{class:"fas fa-arrow-left"},null,-1)])]),_:1},8,["href"]),e[10]||(e[10]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Add Enrollment"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Enroll a user to an event or course")],-1))]),t("form",{onSubmit:A(V,["prevent"]),class:"bg-white dark:bg-slate-800 rounded-lg shadow border border-gray-200 dark:border-slate-700 p-6 space-y-6"},[t("div",null,[e[12]||(e[12]=t("label",{for:"event_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[u(" Event/Course "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{id:"event_id","onUpdate:modelValue":e[0]||(e[0]=a=>s(r).event_id=a),required:"",onChange:_,class:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-[#b30d4f] dark:focus:ring-[#e0156b] focus:border-transparent bg-white dark:bg-slate-900 text-gray-900 dark:text-white"},[e[11]||(e[11]=t("option",{value:""},"Select an event or course",-1)),(o(!0),d(c,null,w(f.events,a=>(o(),d("option",{key:a.id,value:a.id},l(a.title)+" ("+l(a.type)+") - "+l(a.currency)+" "+l(a.amount),9,M))),128))],544),[[y,s(r).event_id]]),s(r).errors.event_id?(o(),d("p",P,l(s(r).errors.event_id),1)):b("",!0)]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},[u(" Enrollment Type "),t("span",{class:"text-red-500"},"*")],-1)),t("div",j,[t("button",{type:"button",onClick:e[1]||(e[1]=a=>n.value="existing_user"),class:g(["p-4 rounded-lg border-2 transition-all",n.value==="existing_user"?"border-[#b30d4f] bg-[#b30d4f]/5 dark:bg-[#b30d4f]/10":"border-gray-200 dark:border-slate-600 hover:border-[#b30d4f]/50"])},[t("i",{class:g(["fas fa-user text-2xl mb-2",n.value==="existing_user"?"text-[#b30d4f]":"text-gray-400"])},null,2),e[13]||(e[13]=t("p",{class:"font-semibold text-gray-900 dark:text-white"},"Existing User",-1)),e[14]||(e[14]=t("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},"Select from registered users",-1))],2),t("button",{type:"button",onClick:e[2]||(e[2]=a=>n.value="guest"),class:g(["p-4 rounded-lg border-2 transition-all",n.value==="guest"?"border-[#b30d4f] bg-[#b30d4f]/5 dark:bg-[#b30d4f]/10":"border-gray-200 dark:border-slate-600 hover:border-[#b30d4f]/50"])},[t("i",{class:g(["fas fa-user-plus text-2xl mb-2",n.value==="guest"?"text-[#b30d4f]":"text-gray-400"])},null,2),e[15]||(e[15]=t("p",{class:"font-semibold text-gray-900 dark:text-white"},"Guest User",-1)),e[16]||(e[16]=t("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},"Manual entry without account",-1))],2)])]),n.value==="existing_user"?(o(),d("div",D,[e[19]||(e[19]=t("label",{for:"user_id",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[u(" Select User "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{id:"user_id","onUpdate:modelValue":e[3]||(e[3]=a=>s(r).user_id=a),onChange:C,required:n.value==="existing_user",class:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-[#b30d4f] dark:focus:ring-[#e0156b] focus:border-transparent bg-white dark:bg-slate-900 text-gray-900 dark:text-white"},[e[18]||(e[18]=t("option",{value:""},"Select a user",-1)),(o(!0),d(c,null,w(f.users,a=>(o(),d("option",{key:a.id,value:a.id},l(a.name)+" ("+l(a.email)+") ",9,$))),128))],40,L),[[y,s(r).user_id]]),s(r).errors.user_id?(o(),d("p",z,l(s(r).errors.user_id),1)):b("",!0)])):b("",!0),n.value==="guest"?(o(),d("div",G,[t("div",null,[e[20]||(e[20]=t("label",{for:"full_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[u(" Full Name "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{id:"full_name","onUpdate:modelValue":e[4]||(e[4]=a=>s(r).full_name=a),type:"text",required:n.value==="guest",class:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-[#b30d4f] dark:focus:ring-[#e0156b] focus:border-transparent bg-white dark:bg-slate-900 text-gray-900 dark:text-white",placeholder:"John Doe"},null,8,I),[[x,s(r).full_name]]),s(r).errors.full_name?(o(),d("p",J,l(s(r).errors.full_name),1)):b("",!0)]),t("div",null,[e[21]||(e[21]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[u(" Email Address "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{id:"email","onUpdate:modelValue":e[5]||(e[5]=a=>s(r).email=a),type:"email",required:n.value==="guest",class:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-[#b30d4f] dark:focus:ring-[#e0156b] focus:border-transparent bg-white dark:bg-slate-900 text-gray-900 dark:text-white",placeholder:"john@example.com"},null,8,O),[[x,s(r).email]]),s(r).errors.email?(o(),d("p",H,l(s(r).errors.email),1)):b("",!0)])])):b("",!0),t("div",null,[e[22]||(e[22]=t("label",{for:"phone_number",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[u(" Phone Number "),t("span",{class:"text-red-500"},"*")],-1)),m(t("input",{id:"phone_number","onUpdate:modelValue":e[6]||(e[6]=a=>s(r).phone_number=a),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-[#b30d4f] dark:focus:ring-[#e0156b] focus:border-transparent bg-white dark:bg-slate-900 text-gray-900 dark:text-white",placeholder:"+263 77 123 4567"},null,512),[[x,s(r).phone_number]]),s(r).errors.phone_number?(o(),d("p",K,l(s(r).errors.phone_number),1)):b("",!0)]),t("div",null,[e[24]||(e[24]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[u(" Status "),t("span",{class:"text-red-500"},"*")],-1)),m(t("select",{id:"status","onUpdate:modelValue":e[7]||(e[7]=a=>s(r).status=a),required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-[#b30d4f] dark:focus:ring-[#e0156b] focus:border-transparent bg-white dark:bg-slate-900 text-gray-900 dark:text-white"},[...e[23]||(e[23]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"confirmed"},"Confirmed",-1)])],512),[[y,s(r).status]]),s(r).errors.status?(o(),d("p",Q,l(s(r).errors.status),1)):b("",!0)]),t("div",null,[e[25]||(e[25]=t("label",{for:"notes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Notes (Optional) ",-1)),m(t("textarea",{id:"notes","onUpdate:modelValue":e[8]||(e[8]=a=>s(r).notes=a),rows:"3",class:"w-full px-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-[#b30d4f] dark:focus:ring-[#e0156b] focus:border-transparent bg-white dark:bg-slate-900 text-gray-900 dark:text-white",placeholder:"Additional information about this enrollment..."},null,512),[[x,s(r).notes]]),s(r).errors.notes?(o(),d("p",R,l(s(r).errors.notes),1)):b("",!0)]),e[29]||(e[29]=t("div",{class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4"},[t("div",{class:"flex items-start gap-3"},[t("i",{class:"fas fa-info-circle text-amber-600 dark:text-amber-400 mt-0.5"}),t("div",{class:"text-sm text-amber-800 dark:text-amber-200"},[t("p",{class:"font-medium mb-1"},"Payment Note"),t("p",null,"This enrollment does not include payment processing. Payment must be handled separately or marked manually.")])])],-1)),t("div",W,[k(s(v),{href:i.route("admin.enrollments.index"),class:"px-4 py-2 border border-gray-300 dark:border-slate-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors"},{default:p(()=>[...e[26]||(e[26]=[u(" Cancel ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",disabled:s(r).processing,class:"px-6 py-2 bg-gradient-to-r from-[#b30d4f] to-[#8b0a3d] text-white font-semibold rounded-lg hover:shadow-lg hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100"},[s(r).processing?(o(),d("span",Y,[...e[27]||(e[27]=[t("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),u(" Creating... ",-1)])])):(o(),d("span",Z,[...e[28]||(e[28]=[t("i",{class:"fas fa-user-check mr-2"},null,-1),u(" Create Enrollment ",-1)])]))],8,X)])],32)])]),_:1}))}});export{ae as default};
