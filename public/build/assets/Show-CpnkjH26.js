import{d as P,r as x,c as N,w as k,a as t,b as A,e as E,l as C,j as m,n as c,t as s,h as d,i as g,o as r,p as u}from"./app-sSc8GzTu.js";import{A as j}from"./AdminLayout-DMbnth8z.js";import"./NavLink-DUR0EKqG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"space-y-6"},D={class:"flex items-center justify-between"},B={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},I={class:"lg:col-span-2 space-y-6"},T={class:"bg-white dark:bg-slate-800 rounded-lg shadow border border-gray-200 dark:border-slate-700 p-6"},F={class:"flex items-center justify-between mb-6"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},V={class:"text-lg font-mono font-semibold text-gray-900 dark:text-white mt-1"},z={class:"text-lg font-mono font-semibold text-gray-900 dark:text-white mt-1"},L={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},O={class:"text-lg font-semibold text-gray-900 dark:text-white mt-1 capitalize"},R={class:"text-lg font-mono font-semibold text-gray-900 dark:text-white mt-1"},U={class:"text-lg font-semibold text-gray-900 dark:text-white mt-1"},G={key:0},$={class:"text-lg font-semibold text-gray-900 dark:text-white mt-1"},q={key:1},H={class:"text-lg font-semibold text-red-600 dark:text-red-400 mt-1"},J={class:"bg-white dark:bg-slate-800 rounded-lg shadow border border-gray-200 dark:border-slate-700 p-6"},K={key:0,class:"space-y-4"},Q={class:"text-lg font-semibold text-gray-900 dark:text-white mt-1"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X={class:"text-lg font-semibold text-gray-900 dark:text-white mt-1"},Y={class:"text-lg font-semibold text-gray-900 dark:text-white mt-1 capitalize"},Z={key:1,class:"text-gray-600 dark:text-gray-400"},_={class:"bg-white dark:bg-slate-800 rounded-lg shadow border border-gray-200 dark:border-slate-700 p-6"},tt={key:0,class:"space-y-4"},et={class:"text-lg font-semibold text-gray-900 dark:text-white mt-1"},at={class:"text-lg font-semibold text-gray-900 dark:text-white mt-1"},st={key:1,class:"text-gray-600 dark:text-gray-400"},rt={class:"bg-white dark:bg-slate-800 rounded-lg shadow border border-gray-200 dark:border-slate-700 p-6 mb-6"},nt={key:0},dt={class:"mb-3"},lt={class:"text-sm text-gray-600 dark:text-gray-400"},ot={key:1,class:"text-gray-600 dark:text-gray-400 text-sm mb-4"},it={class:"bg-white dark:bg-slate-800 rounded-lg shadow border border-gray-200 dark:border-slate-700 p-6 space-y-3"},mt=["disabled"],gt=["disabled"],ut={key:2,class:"p-3 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 rounded-lg text-sm flex items-center gap-2"},yt={key:3,class:"p-3 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200 rounded-lg text-sm flex items-center gap-2"},kt=P({__name:"Show",props:{payment:{}},setup(a){const f=a,l=x(!1),i=x(""),o=x(""),y=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=n=>Number(n).toFixed(2),v=n=>{switch(n){case"paid":return"fa-check-circle";case"pending":case"processing":return"fa-clock";case"failed":return"fa-times-circle";case"refunded":return"fa-undo";default:return"fa-circle"}},h=async()=>{l.value=!0,o.value="",i.value="";try{await u.post(route("admin.payments.mark-paid",f.payment.id),{},{onSuccess:()=>{i.value="Payment marked as paid successfully!",setTimeout(()=>{u.reload()},1500)},onError:n=>{o.value=Object.values(n).join(", ")||"Failed to mark payment as paid"}})}catch{o.value="An error occurred. Please try again."}finally{l.value=!1}},w=async()=>{l.value=!0,o.value="",i.value="";try{await u.post(route("admin.payments.create-enrollment",f.payment.id),{},{onSuccess:()=>{i.value="Enrollment created successfully!",setTimeout(()=>{u.reload()},1500)},onError:n=>{o.value=Object.values(n).join(", ")||"Failed to create enrollment"}})}catch{o.value="An error occurred. Please try again."}finally{l.value=!1}};return(n,e)=>(r(),N(j,null,{default:k(()=>{var b;return[t("div",S,[t("div",D,[t("div",null,[A(E(C),{href:"/admin/payments",class:"text-[#b30d4f] dark:text-[#e0156b] hover:underline flex items-center gap-2 mb-2"},{default:k(()=>[...e[0]||(e[0]=[t("i",{class:"fas fa-arrow-left"},null,-1),m(" Back to Payments ",-1)])]),_:1}),e[1]||(e[1]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Payment Details",-1))])]),t("div",B,[t("div",I,[t("div",T,[t("div",F,[e[2]||(e[2]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Payment Information",-1)),t("span",{class:c(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",a.payment.status==="paid"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":a.payment.status==="pending"?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200":a.payment.status==="failed"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200":"bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-200"])},[t("i",{class:c(`fas ${v(a.payment.status)} mr-2`)},null,2),m(" "+s(a.payment.status),1)],2)]),t("div",M,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Reference Number",-1)),t("p",V,s(a.payment.reference_number),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Transaction ID",-1)),t("p",z,s(a.payment.transaction_id||"N/A"),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Amount",-1)),t("p",L,s(a.payment.currency)+" "+s(p(a.payment.amount)),1)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Payment Method",-1)),t("p",O,s(a.payment.payment_method),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Phone Number",-1)),t("p",R,s(a.payment.phone_number),1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Created",-1)),t("p",U,s(y(a.payment.created_at)),1)]),a.payment.paid_at?(r(),d("div",G,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Paid",-1)),t("p",$,s(y(a.payment.paid_at)),1)])):g("",!0),a.payment.failed_reason?(r(),d("div",q,[e[10]||(e[10]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Failed Reason",-1)),t("p",H,s(a.payment.failed_reason),1)])):g("",!0)])]),t("div",J,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Event Information",-1)),a.payment.event?(r(),d("div",K,[t("div",null,[e[11]||(e[11]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Event/Course",-1)),t("p",Q,s(a.payment.event.title),1)]),t("div",W,[t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Category",-1)),t("p",X,s(((b=a.payment.event.category)==null?void 0:b.name)||"N/A"),1)]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Type",-1)),t("p",Y,s(a.payment.event.type),1)])])])):(r(),d("div",Z,"No event associated with this payment"))]),t("div",_,[e[17]||(e[17]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"User Information",-1)),a.payment.user?(r(),d("div",tt,[t("div",null,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Name",-1)),t("p",et,s(a.payment.user.name),1)]),t("div",null,[e[16]||(e[16]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 font-medium"},"Email",-1)),t("p",at,s(a.payment.user.email),1)])])):(r(),d("div",st,"Guest user (no account)"))])]),t("div",null,[t("div",rt,[e[18]||(e[18]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Enrollment Status",-1)),a.payment.enrollment?(r(),d("div",nt,[t("div",dt,[t("span",{class:c(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",a.payment.enrollment.status==="confirmed"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200"])},s(a.payment.enrollment.status),3)]),t("p",lt," Enrolled on "+s(y(a.payment.enrollment.enrollment_date)),1)])):(r(),d("div",ot," No enrollment record for this payment yet. "))]),t("div",it,[e[23]||(e[23]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Admin Actions",-1)),a.payment.status!=="paid"?(r(),d("button",{key:0,onClick:h,disabled:l.value,class:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 transition-colors font-medium flex items-center justify-center gap-2"},[e[19]||(e[19]=t("i",{class:"fas fa-check-circle"},null,-1)),m(" "+s(l.value?"Processing...":"Mark as Paid âœ“"),1)],8,mt)):g("",!0),a.payment.status==="paid"&&!a.payment.enrollment?(r(),d("button",{key:1,onClick:w,disabled:l.value,class:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors font-medium flex items-center justify-center gap-2"},[e[20]||(e[20]=t("i",{class:"fas fa-user-plus"},null,-1)),m(" "+s(l.value?"Processing...":"Create Enrollment"),1)],8,gt)):g("",!0),i.value?(r(),d("div",ut,[e[21]||(e[21]=t("i",{class:"fas fa-check-circle"},null,-1)),m(" "+s(i.value),1)])):g("",!0),o.value?(r(),d("div",yt,[e[22]||(e[22]=t("i",{class:"fas fa-exclamation-circle"},null,-1)),m(" "+s(o.value),1)])):g("",!0)])])])])]}),_:1}))}});export{kt as default};
